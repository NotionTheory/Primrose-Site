function eye(e,n){var o=sphere(.05,6,3).colored(16777215).addTo(n).at(.07*e,.05,.16);return sphere(.01,3,2).colored(0).addTo(o).at(0,0,.045),o}function Jabber(e,n,o){var t=R.item(Primrose.Constants.SKINS),r=hub().at(R.number(-e,e),0,R.number(-n,n)),a=sphere(.2,14,7).colored(t,{shadow:!0}).addTo(r).at(0,.125,0),i=v3(R.number(-o,o),0,R.number(-o,o)),s=v3(0,0,0);return eye(-1,a),eye(1,a),r.rotation.y=Math.PI,r.update=function(o){i.y-=env.options.gravity*o,r.position.add(s.copy(i).multiplyScalar(o)),(i.x>0&&r.position.x>=e||i.x<0&&r.position.x<=-e)&&(i.x*=-1),(i.z>0&&r.position.z>=n||i.z<0&&r.position.z<=-n)&&(i.z*=-1),i.y<0&&r.position.y<0&&(i.y=0,r.position.y=0),s.copy(r.position).sub(env.input.head.position);var t=s.length();t<3?(s.divideScalar(t),s.y=0,i.add(s.multiplyScalar((3-t)/100)),s.set(R.number(-.01,.01),R.number(-.01,.01),R.number(-.01,.01)),r.position.add(s),r.lookAt(env.input.head.position)):r.lookAt(s.copy(i).add(r.position))},a.addEventListener("select",function(e){s.copy(e.hit.face.normal),s.y=env.options.gravity/2,i.add(s)}),r}var WIDTH=100,HEIGHT=6,DEPTH=100,MIDX=WIDTH/2,MIDY=HEIGHT/2,MIDZ=DEPTH/2,t=0,jabs={},R=Primrose.Random,env=new Primrose.BrowserEnvironment({backgroundColor:13231854,skyTexture:"../images/bg.jpg",groundTexture:"../images/grass.png",font:"../fonts/helvetiker_regular.typeface.json",useFog:!0,drawDistance:100,enableShadows:!0,fullScreenButtonContainer:"#fullScreenButtonContainer",progress:Preloader.thunk});env.addEventListener("ready",function(){for(var e=0;e<10;++e){var n=Jabber(MIDX/5,MIDZ/5,1);jabs[n.uuid]=n,env.scene.add(n)}Preloader.hide()}),env.addEventListener("update",function(){for(var e in jabs)jabs[e].update(env.deltaTime)});