var GRASS="../images/grass.png",ROCK="../images/rock.png",SAND="../images/sand.png",WATER="../images/water.png",DECK="../images/deck.png",WIDTH=100,HEIGHT=11,DEPTH=100,MIDX=WIDTH/2,MIDY=HEIGHT/2,MIDZ=DEPTH/2,ball=null,t=0,dx=7,dy=2.5,dz=4,env=new Primrose.BrowserEnvironment({skyTexture:"../images/bg.jpg",groundTexture:DECK,useFog:!0,fullScreenButtonContainer:"#fullScreenButtonContainer",progress:Preloader.thunk});env.addEventListener("ready",function(){function n(n,o){e.splice(0);for(var r=n*n,i=-n;i<=n;i+=o)for(var d=i*i,t=-n;t<=n;t+=o){var s=t*t;if(d+s<r){var l=Math.sqrt(r-d-s);e.push(v3(i,l,t)),e.push(v3(i,-l,t))}}cloud(e,16711680,o*Math.sqrt(2)).addTo(a).at(MIDX-n,n,MIDZ-n)}function o(n,o,e,r,i,d){cylinder(n,o,e,6,1).textured(SAND).addTo(a).at(r,i,d)}var a=hub().addTo(this.scene).at(-MIDX,0,-MIDZ),e=(brick(DECK,WIDTH,.1,DEPTH).named("Ceiling").addTo(a).at(WIDTH/2,12.5,DEPTH/2),[]);ball=brick(ROCK,1,1,1).named("Ball").addTo(a).at(0,0,0);for(var r=0;r<5e3;++r)e.push(v3(Primrose.Random.number(-.5*WIDTH,.5*WIDTH),Primrose.Random.number(-.5*HEIGHT,.5*HEIGHT),Primrose.Random.number(-.5*DEPTH,.5*DEPTH)));cloud(e,this.options.backgroundColor,.05).addTo(a).at(MIDX,MIDY,MIDZ),n(10,.1);for(var r=0;r<100;++r){var i=Primrose.Random.int(WIDTH),d=Primrose.Random.int(DEPTH);o(.5,1,1,i,0,d),o(.5,.5,11,i,6,d),o(2,.5,1,i,12,d)}Preloader.hide()}.bind(env)),env.addEventListener("update",function(n){t+=n,ball.position.x+=dx*n,ball.position.y+=dy*n,ball.position.z+=dz*n,(ball.position.x<0&&dx<0||WIDTH<=ball.position.x&&dx>0)&&(dx*=-1),(ball.position.y<1&&dy<0||HEIGHT<=ball.position.y&&dy>0)&&(dy*=-1),(ball.position.z<0&&dz<0||DEPTH<=ball.position.z&&dz>0)&&(dz*=-1)});