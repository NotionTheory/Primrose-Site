<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="web-app-capable" content="yes"><meta name="theme-color" content="black"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="description" content="A WebVR application framework."><meta name="keywords" content="WebGL, WebVR, HTML5, JavaScript, text editor, source code editor, virtual reality, Primrose"><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@Primrose_VR"><meta property="og:site_name" content="Primrose VR"><meta property="og:description" content="Primrose: Framework for WebVR Applications"><meta name="twitter:description" content="Primrose: Framework for WebVR Applications"><meta property="og:url" content="http://www.primrosevr.com/doc/music.html"><!-- start main.jade meta block --><meta name="twitter:image" content="http://www.primrosevr.com/images/screenshot.jpg"><meta property="og:image" content="http://www.primrosevr.com/images/screenshot.jpg"><!-- end main.jade meta block -->
<!-- start main.jade title block --><!-- start detailPage.jade title block --><meta property="og:title" content="Primrose VR: WebVR Application Framework Documentation"><meta name="twitter:title" content="Primrose VR: WebVR Application Framework Documentation"><title>Primrose VR: WebVR Application Framework Documentation</title><!-- end detailPage.jade title block --><!-- end main.jade title block --><link type="text/css" rel="stylesheet" href="../doc/style.min.css"><!-- start withFramework.jade head append --><script type="text/javascript" src="../PrimroseDependencies.min.js"></script><script type="text/javascript" src="../Primrose.min.js"></script><!-- end withFramework.jade head append --><!-- start documentation.jade head append --><script type="text/javascript" src="../PrimroseDocumentation.min.js"></script><!-- end documentation.jade head append --><script type="text/javascript" src="../ga.js"></script></head><body><header role="banner"><a id="logo" href="../"><img src="../doc/images/primrose40.png" alt="logo" title="Primrose logo"></a><nav role="navigation"><ul><li><a href="../doc/">Docs</a></li><li><a href="../doc/faq.html">FAQ</a></li><li><a href="../doc/community.html">Community</a></li><li><a href="https://github.com/capnmidnight/Primrose/" target="_blank">Github</a></li></ul></nav><h1>Documentation</h1></header><!-- start main.jade banner block --><!-- end main.jade banner block -->
<!-- start main.jade main block --><main><!-- start documentation.jade main block --><div id="top"></div><div id="contents"><nav><ul><li><a href="../doc/setup.html">Installation &amp; Setup</a></li></ul></nav></div><div id="documentation"><section><article><!-- start documentation.jade documentation block --><!-- start demo.jade banner block --><h1></h1><p>Click on the image below to lock mouse cursor to demo. <a href="../doc/music" target="_blank">Open demo in new window</a>.</p><iframe id="demo" src="../doc/music" role="application" allowfullscreen></iframe><h2>Source</h2><pre id="editorContainer">grammar(&quot;JavaScript&quot;);
var env = new Primrose.BrowserEnvironment(
  // We give the application a name here, in case we ever
  // hook it up to the Multiplayer Server.
  &quot;Music&quot;, {
    // This file references a Three.js JSON-formatted scene
    // file, which basically describes a room or level in 
    // which the user will walk around, on which we can 
    // create additional objects.
    sceneModel: &quot;../models/holodeck.json&quot;,
    fullScreenIcon: &quot;../models/monitor.obj&quot;,
    VRIcon: &quot;../models/cardboard.obj&quot;,
    font: &quot;../fonts/helvetiker_regular.typeface.js&quot;,
    // One of our GUI controls is configured here.
    button: {
      // This file references another Three.js JSON-formatted
      // model file, which will be cloned anytime a user
      // calls createElement(&quot;button&quot;).
      model: &quot;../models/smallbutton.json&quot;,
      // Display settings for different states of the button.
      options: {
        colorUnpressed: 0x7f0000,
        colorPressed: 0x007f00
      }
    }
  });

// Once Primrose has setup the WebGL context, setup Three.js, 
// downloaded and validated all of model files, and constructed
// the basic scene hierarchy out of it, the &quot;ready&quot; event is fired,
// indicating that we may make additional changes to the scene now.
env.addEventListener(&quot;ready&quot;, function () {

  var numButtons = 8,
    middle = (numButtons - 1) / 2;

  for (var i = 0; i &lt; numButtons; ++i) {

    var btn = env.createElement(&quot;button&quot;);

    // We can wire up event handlers on the button just like it was
    // a DOM element.
    btn.addEventListener(
      &quot;click&quot;,
      // Primrose already has a basic sound API setup, so you
      // can hook directly into it to create basic, procedurally
      // generated music.
      env.music.play.bind(
        env.music,
        // The play method understands Piano key indices, so
        // we just need to calculate the note we want to play,
        // understanding Middle C to be note 44.
        35 + i * 4,
        // Volume, on the range [0, 1]. Full volume is quite loud.
        0.30,
        // Duration to play, in seconds.
        0.2));

    // Spacing the buttons out in a rough arc around the origin.
    var x = (i - middle) * 0.25,
      z = -1.5 * Math.cos(x) + 1,
      // Put the element into the scene
      btnBase = env.appendChild(btn);
    btnBase.position.set(x, 0, z);
  }
});</pre><!-- end documentation.jade documentation block --></article></section></div><!-- end documentation.jade main block --></main><!-- end main.jade main block -->
<!-- start main.jade footer block --><footer><div id="footerWrapper"><a href="../doc/readme.html">About</a><a href="../doc/license.html">License</a><a href="../doc/changelog.html">Changelog</a><a href="https://notiontheory.typeform.com/to/QzZmAD" target="_blank">Slack</a><a class="small icon github" href="https://www.github.com/NotionTheory/Primrose" target="_blank">&nbsp;</a><a class="small icon twitter" href="https://www.twitter.com/Primrose_VR" target="_blank">&nbsp;</a><a href="http://www.notiontheory.com/team" target="_blank" style="color:#ec2471">Made (with love) by NotionTheory</a></div><script type="text/javascript" async defer src="app.js"></script></footer><!-- end main.jade footer block --></body></html>