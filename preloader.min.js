!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Preloader=t()}(this,function(){"use strict";function e(e,t){var n=new XMLHttpRequest;n.onload=t&&function(){t(n.response)},n.onprogress=r&&r.thunk,n.open("GET",e),n.send()}function t(){if(document.body)if(window.DEBUG){if(s.length>0){var e=s.shift(),n=document.createElement("script");n.src=e,n.onload=t,document.body.appendChild(n)}}else{var r=document.createElement("script");r.innerHTML=s.join("\n"),document.body.appendChild(r)}else setTimeout(t,0)}function n(n,r,i){e(n,function(e){window.DEBUG?s[r]=n:s[r]=e,++a,a===i.length&&t()})}var r={bar:null,files:{},loaded:0,total:0,findProgressBar:function(){this.bar||(this.bar=document.querySelector("progress"))},shrink:function(e){this.findProgressBar(),this.bar&&(this.bar.style.height=e)},hide:function(){this.findProgressBar(),this.bar&&(this.bar.style.display="none")},thunk:function(e){var t=e.target.responseURL||e.target.currentSrc;if(t){this.files[t]||(this.files[t]={});var n=this.files[t];if("number"==typeof e.loaded)n.loaded=e.loaded,n.total=e.total;else if(e.srcElement){for(var r=e.srcElement.buffered,i=Number.MAX_VALUE,o=Number.MIN_VALUE,s=0;s<r.length;++s)i=Math.min(i,r.start(s)),o=Math.max(o,r.end(s));n.loaded=1e3*o,n.total=1e3*e.srcElement.duration}}var a=0,d=0;for(var l in this.files){var f=this.files[l];d+=f.loaded,a+=f.total}this.loaded=d,this.total=a,this.findProgressBar(),this.bar&&a&&(this.bar.max=a,this.bar.value=d)}},i=document.querySelectorAll("script"),o=i[i.length-1],s=[];["findProgressBar","shrink","hide","thunk"].forEach(function(e){return r[e]=r[e].bind(r)});var a=0;return window.PRIMROSE_TELEMETRY_OPT_OUT||e("https://www.primrosevr.com/telemetry"),o&&o.dataset.files&&o.dataset.files.split(",").forEach(n),r});
