var GRASS="../shared_assets/images/grass.png",ROCK="../shared_assets/images/rock.png",SAND="../shared_assets/images/sand.png",WATER="../shared_assets/images/water.png",DECK="../shared_assets/images/deck.png",WIDTH=100,HEIGHT=11,DEPTH=100,MIDX=WIDTH/2,MIDY=HEIGHT/2,MIDZ=DEPTH/2,ball=null,t=0,dx=7,dy=2.5,dz=4,env=new Primrose.BrowserEnvironment({skyTexture:"../shared_assets/images/bg.jpg",groundTexture:DECK,useFog:!0,fullScreenButtonContainer:"#fullScreenButtonContainer",progress:Preloader.thunk});env.addEventListener("ready",function(){function a(a,e){n.splice(0);for(var r=a*a,o=-a;o<=a;o+=e)for(var d=o*o,t=-a;t<=a;t+=e){var i=t*t;if(d+i<r){var l=Math.sqrt(r-d-i);n.push(v3(o,l,t)),n.push(v3(o,-l,t))}}cloud(n,16711680,e*Math.sqrt(2)).addTo(s).at(MIDX-a,a,MIDZ-a)}function e(a,e,n,r,o,d){cylinder(a,e,n,6,1).textured(SAND).addTo(s).at(r,o,d)}var s=hub().addTo(this.scene).at(-MIDX,0,-MIDZ),n=(brick(DECK,WIDTH,.1,DEPTH).named("Ceiling").addTo(s).at(WIDTH/2,12.5,DEPTH/2),[]);ball=brick(ROCK,1,1,1).named("Ball").addTo(s).at(0,0,0);for(var r=0;r<5e3;++r)n.push(v3(Primrose.Random.number(-.5*WIDTH,.5*WIDTH),Primrose.Random.number(-.5*HEIGHT,.5*HEIGHT),Primrose.Random.number(-.5*DEPTH,.5*DEPTH)));cloud(n,this.options.backgroundColor,.05).addTo(s).at(MIDX,MIDY,MIDZ),a(10,.1);for(var r=0;r<100;++r){var o=Primrose.Random.int(WIDTH),d=Primrose.Random.int(DEPTH);e(.5,1,1,o,0,d),e(.5,.5,11,o,6,d),e(2,.5,1,o,12,d)}Preloader.hide()}.bind(env)),env.addEventListener("update",function(a){t+=a,ball.position.x+=dx*a,ball.position.y+=dy*a,ball.position.z+=dz*a,(ball.position.x<0&&dx<0||WIDTH<=ball.position.x&&dx>0)&&(dx*=-1),(ball.position.y<1&&dy<0||HEIGHT<=ball.position.y&&dy>0)&&(dy*=-1),(ball.position.z<0&&dz<0||DEPTH<=ball.position.z&&dz>0)&&(dz*=-1)});